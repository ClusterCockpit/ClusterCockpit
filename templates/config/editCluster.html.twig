{% extends 'base.html.twig' %}

{% block title %}
    {{ title }}
{% endblock %}

{% block javascript %}
    {{ parent() }}
    <script src="{{ asset('js/feather.min.js') }}"/></script>
    <script src="{{ asset('js/bs-custom-file-input.min.js') }}"/></script>
    <script>
        $(document).ready(function () {
            bsCustomFileInput.init()
            feather.replace()
        })
    </script>
{% endblock %}

{% form_theme form 'bootstrap_4_layout.html.twig' %}

    {% block body %}
        <div class="row">
            {{ include("renderSidebar.html.twig") }}
            <div class="col-10 ml-auto">

                <h2 id='page-top'>{{ title }} </h2>

                {{ form_start(form) }}
                <!-- {{ form_errors(form) }} -->

                <div class="form-group row">
                    <div class="col">
                        {{ form_row(form.name) }}
                        {{ form_row(form.coresPerNode) }}
                        {{ form_row(form.metricListConfig) }}
                    </div>
                    <div class="col">

                        <div class="form-group">
                            {{ form_label(form.flopRateScalar) }}
                            <div class="input-group">
                                {{ form_widget(form.flopRateScalar) }}
                                <div class="input-group-append">
                                    <div class="input-group-text">GFlops/s</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            {{ form_label(form.flopRateSimd) }}
                            <div class="input-group">
                                {{ form_widget(form.flopRateSimd) }}
                                <div class="input-group-append">
                                    <div class="input-group-text">GFlops/s</div>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            {{ form_label(form.memoryBandwidth) }}
                            <div class="input-group">
                                {{ form_widget(form.memoryBandwidth) }}
                                <div class="input-group-append">
                                    <div class="input-group-text">GB/s</div>
                                </div>
                            </div>
                        </div>


                        {{ form_row(form.nodeFile) }}
                    </div>
                </div>


                <div class="form-group row justify-content-end">
                    <div class="col-1">
                        {{ form_widget(form.cancel, {'attr': {'class': 'btn-danger btn'}}) }}
                    </div>
                    <div class="col-2">
                        {{ form_widget(form.save, {'attr': {'class': 'btn-success btn'}}) }}
                    </div>
                </div>
                {{ form_end(form) }}



                <h4 id='nodes'>Node list</h4>

                <a>Cluster has {{ cluster.nodes | length }} active nodes.</a>

                <div class="table-responsive">
                    <table class="table table-striped table-bordered  table-hover">
                        <thead class="thead-light">
                            <th>Id</th>
                            <th>NodeId</th>
                            <th>Status</th>
                        </thead>
                        <tbody>
                            {% for node in cluster.nodes %}
                                <tr>
                                    <td class="align-middle text-center">{{ node.id }}</td>
                                    <td class="align-middle text-center">{{ node.nodeId }}</td>
                                    <td class="align-middle text-center">{{ node.status }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
    {% endblock %}
